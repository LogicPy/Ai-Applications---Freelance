{"ast":null,"code":"// frontend/src/components/ThreeJSRenderer.js\nimport React,{useEffect,useRef}from'react';import*as THREE from'three';import*as esprima from'esprima';// Correct import\nimport{jsx as _jsx}from\"react/jsx-runtime\";const ThreeJSRenderer=_ref=>{let{code}=_ref;const mountRef=useRef(null);useEffect(()=>{if(!code)return;// Clear any existing scene\nmountRef.current.innerHTML='';// Create a new scene, camera, and renderer\nconst scene=new THREE.Scene();const camera=new THREE.PerspectiveCamera(75,mountRef.current.clientWidth/mountRef.current.clientHeight,0.1,1000);const renderer=new THREE.WebGLRenderer({antialias:true});renderer.setSize(mountRef.current.clientWidth,mountRef.current.clientHeight);mountRef.current.appendChild(renderer.domElement);// Log the generated code for debugging\nconsole.log('Executing Three.js Code:',code);// Validate the generated code syntax using Esprima\ntry{esprima.parseScript(code);}catch(parseError){console.error('Generated code has syntax errors:',parseError.message);return;// Stop execution if syntax errors are found\n}// Create a function to execute the generated code\nconst executeCode=()=>{try{console.log('Executing Function Constructor with code:',code);const func=new Function('THREE','scene','camera','renderer',code);func(THREE,scene,camera,renderer);console.log('Code executed successfully.');}catch(error){console.error('Error executing generated Three.js code:',error);}};executeCode();// Animation loop\nconst animate=()=>{requestAnimationFrame(animate);renderer.render(scene,camera);};animate();// Cleanup on component unmount\nreturn()=>{mountRef.current.innerHTML='';};},[code]);return/*#__PURE__*/_jsx(\"div\",{ref:mountRef,style:{width:'100%',height:'100vh'}});};export default ThreeJSRenderer;","map":{"version":3,"names":["React","useEffect","useRef","THREE","esprima","jsx","_jsx","ThreeJSRenderer","_ref","code","mountRef","current","innerHTML","scene","Scene","camera","PerspectiveCamera","clientWidth","clientHeight","renderer","WebGLRenderer","antialias","setSize","appendChild","domElement","console","log","parseScript","parseError","error","message","executeCode","func","Function","animate","requestAnimationFrame","render","ref","style","width","height"],"sources":["C:/Users/Admin/Desktop/threejs_ide/threejs-ide/frontend/src/components/ThreeJSRenderer.js"],"sourcesContent":["// frontend/src/components/ThreeJSRenderer.js\r\n\r\nimport React, { useEffect, useRef } from 'react';\r\nimport * as THREE from 'three';\r\nimport * as esprima from 'esprima'; // Correct import\r\n\r\nconst ThreeJSRenderer = ({ code }) => {\r\n  const mountRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (!code) return;\r\n\r\n    // Clear any existing scene\r\n    mountRef.current.innerHTML = '';\r\n\r\n    // Create a new scene, camera, and renderer\r\n    const scene = new THREE.Scene();\r\n\r\n    const camera = new THREE.PerspectiveCamera(\r\n      75,\r\n      mountRef.current.clientWidth / mountRef.current.clientHeight,\r\n      0.1,\r\n      1000\r\n    );\r\n\r\n    const renderer = new THREE.WebGLRenderer({ antialias: true });\r\n    renderer.setSize(mountRef.current.clientWidth, mountRef.current.clientHeight);\r\n    mountRef.current.appendChild(renderer.domElement);\r\n\r\n    // Log the generated code for debugging\r\n    console.log('Executing Three.js Code:', code);\r\n\r\n    // Validate the generated code syntax using Esprima\r\n    try {\r\n      esprima.parseScript(code);\r\n    } catch (parseError) {\r\n      console.error('Generated code has syntax errors:', parseError.message);\r\n      return; // Stop execution if syntax errors are found\r\n    }\r\n\r\n    // Create a function to execute the generated code\r\n    const executeCode = () => {\r\n      try {\r\n        console.log('Executing Function Constructor with code:', code);\r\n        const func = new Function('THREE', 'scene', 'camera', 'renderer', code);\r\n        func(THREE, scene, camera, renderer);\r\n        console.log('Code executed successfully.');\r\n      } catch (error) {\r\n        console.error('Error executing generated Three.js code:', error);\r\n      }\r\n    };\r\n\r\n    executeCode();\r\n\r\n    // Animation loop\r\n    const animate = () => {\r\n      requestAnimationFrame(animate);\r\n      renderer.render(scene, camera);\r\n    };\r\n\r\n    animate();\r\n\r\n    // Cleanup on component unmount\r\n    return () => {\r\n      mountRef.current.innerHTML = '';\r\n    };\r\n  }, [code]);\r\n\r\n  return <div ref={mountRef} style={{ width: '100%', height: '100vh' }} />;\r\n};\r\n\r\nexport default ThreeJSRenderer;\r\n"],"mappings":"AAAA;AAEA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CAChD,MAAO,GAAK,CAAAC,KAAK,KAAM,OAAO,CAC9B,MAAO,GAAK,CAAAC,OAAO,KAAM,SAAS,CAAE;AAAA,OAAAC,GAAA,IAAAC,IAAA,yBAEpC,KAAM,CAAAC,eAAe,CAAGC,IAAA,EAAc,IAAb,CAAEC,IAAK,CAAC,CAAAD,IAAA,CAC/B,KAAM,CAAAE,QAAQ,CAAGR,MAAM,CAAC,IAAI,CAAC,CAE7BD,SAAS,CAAC,IAAM,CACd,GAAI,CAACQ,IAAI,CAAE,OAEX;AACAC,QAAQ,CAACC,OAAO,CAACC,SAAS,CAAG,EAAE,CAE/B;AACA,KAAM,CAAAC,KAAK,CAAG,GAAI,CAAAV,KAAK,CAACW,KAAK,CAAC,CAAC,CAE/B,KAAM,CAAAC,MAAM,CAAG,GAAI,CAAAZ,KAAK,CAACa,iBAAiB,CACxC,EAAE,CACFN,QAAQ,CAACC,OAAO,CAACM,WAAW,CAAGP,QAAQ,CAACC,OAAO,CAACO,YAAY,CAC5D,GAAG,CACH,IACF,CAAC,CAED,KAAM,CAAAC,QAAQ,CAAG,GAAI,CAAAhB,KAAK,CAACiB,aAAa,CAAC,CAAEC,SAAS,CAAE,IAAK,CAAC,CAAC,CAC7DF,QAAQ,CAACG,OAAO,CAACZ,QAAQ,CAACC,OAAO,CAACM,WAAW,CAAEP,QAAQ,CAACC,OAAO,CAACO,YAAY,CAAC,CAC7ER,QAAQ,CAACC,OAAO,CAACY,WAAW,CAACJ,QAAQ,CAACK,UAAU,CAAC,CAEjD;AACAC,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAEjB,IAAI,CAAC,CAE7C;AACA,GAAI,CACFL,OAAO,CAACuB,WAAW,CAAClB,IAAI,CAAC,CAC3B,CAAE,MAAOmB,UAAU,CAAE,CACnBH,OAAO,CAACI,KAAK,CAAC,mCAAmC,CAAED,UAAU,CAACE,OAAO,CAAC,CACtE,OAAQ;AACV,CAEA;AACA,KAAM,CAAAC,WAAW,CAAGA,CAAA,GAAM,CACxB,GAAI,CACFN,OAAO,CAACC,GAAG,CAAC,2CAA2C,CAAEjB,IAAI,CAAC,CAC9D,KAAM,CAAAuB,IAAI,CAAG,GAAI,CAAAC,QAAQ,CAAC,OAAO,CAAE,OAAO,CAAE,QAAQ,CAAE,UAAU,CAAExB,IAAI,CAAC,CACvEuB,IAAI,CAAC7B,KAAK,CAAEU,KAAK,CAAEE,MAAM,CAAEI,QAAQ,CAAC,CACpCM,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAC,CAC5C,CAAE,MAAOG,KAAK,CAAE,CACdJ,OAAO,CAACI,KAAK,CAAC,0CAA0C,CAAEA,KAAK,CAAC,CAClE,CACF,CAAC,CAEDE,WAAW,CAAC,CAAC,CAEb;AACA,KAAM,CAAAG,OAAO,CAAGA,CAAA,GAAM,CACpBC,qBAAqB,CAACD,OAAO,CAAC,CAC9Bf,QAAQ,CAACiB,MAAM,CAACvB,KAAK,CAAEE,MAAM,CAAC,CAChC,CAAC,CAEDmB,OAAO,CAAC,CAAC,CAET;AACA,MAAO,IAAM,CACXxB,QAAQ,CAACC,OAAO,CAACC,SAAS,CAAG,EAAE,CACjC,CAAC,CACH,CAAC,CAAE,CAACH,IAAI,CAAC,CAAC,CAEV,mBAAOH,IAAA,QAAK+B,GAAG,CAAE3B,QAAS,CAAC4B,KAAK,CAAE,CAAEC,KAAK,CAAE,MAAM,CAAEC,MAAM,CAAE,OAAQ,CAAE,CAAE,CAAC,CAC1E,CAAC,CAED,cAAe,CAAAjC,eAAe","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}